import r,{createContext as t,useState as e,useReducer as n}from"react";function o(r,t){return function(r){if(Array.isArray(r))return r}(r)||function(r,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(r)))return;var e=[],n=!0,o=!1,a=void 0;try{for(var i,u=r[Symbol.iterator]();!(n=(i=u.next()).done)&&(e.push(i.value),!t||e.length!==t);n=!0);}catch(r){o=!0,a=r}finally{try{n||null==u.return||u.return()}finally{if(o)throw a}}return e}(r,t)||function(r,t){if(!r)return;if("string"==typeof r)return a(r,t);var e=Object.prototype.toString.call(r).slice(8,-1);"Object"===e&&r.constructor&&(e=r.constructor.name);if("Map"===e||"Set"===e)return Array.from(e);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return a(r,t)}(r,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(r,t){(null==t||t>r.length)&&(t=r.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=r[e];return n}var i={},u=function(r){var e,n,o,a=t({storage:{},dispatch:function(r){console.log("Action dispatched: ",r),console.warn("You're using Storage.Consumer outside of Storage.Provider")}}),u=(o=a,(n=r)in(e={})?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o,e);return function(r){Object.assign(i,r)}(u),u[r]},c=function(r){return i[r]?i[r]:null},l=function(r,t){var e,n="React-Context-Storage-"+r;try{return(e=t?sessionStorage.getItem(n):localStorage.getItem(n))?JSON.parse(e):null}catch(r){throw new Error("Error getting ".concat(t?"session":"local"," storage for ").concat(n))}},s=function(r,t,e){var n="React-Context-Storage-"+r;try{var o=JSON.stringify(t);e?sessionStorage.setItem(n,o):localStorage.setItem(n,o)}catch(r){throw new Error("Error setting ".concat(e?"session":"local"," storage for ").concat(n))}},f=function(t){var a=t.storageName,i=t.defaultValues,f=t.reducer,g=t.useSession,m=t.useLocal;return function(t){return function(v){var d=o(e(null),2),y=d[0],S=d[1],b=o(n(f,function(){if(null===y){var r=g?l(a,!0)||i:m&&l(a,!1)||i;return S(r),r}return y}()),2),h=b[0],p=b[1];g?s(a,h,!0):m&&s(a,h,!1);var w=c(a)||u(a);return r.createElement(w.Provider,{value:{storage:h,dispatch:p}},r.createElement(t,Object.assign({},v)))}}},g=function(t){return function(e){return function(n){var o=c(t);if(!o)throw new Error("Invalid Storage name. Storage must be created using withStorageProvider()");return r.createElement(o.Consumer,null,(function(t){return r.createElement(e,Object.assign({},n,{context:t}))}))}}};export{g as withStorage,f as withStorageProvider};
//# sourceMappingURL=build.js.map
